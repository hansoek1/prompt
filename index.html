<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ë²„íŠ¼ ì„ íƒ ê²Œì„</title>
    <style>
        body {
            font-family: sans-serif;
            padding: 30px;
            text-align: center;
        }
        button {
            padding: 15px 30px;
            margin: 10px;
            font-size: 16px;
        }
        #scoreDisplay, #answerLog {
            margin-top: 30px;
            font-size: 18px;
            font-weight: bold;
        }
        #answerLog {
            text-align: left;
            max-width: 500px;
            margin: 20px auto;
            border-top: 1px solid #ccc;
            padding-top: 10px;
            white-space: normal;
        }
    </style>
</head>
<body>

    <h1>ì •ë‹µ ë²„íŠ¼ì„ ì°¾ì•„ë¼!</h1>
    <p>3ê°œì˜ ë²„íŠ¼ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ì„¸ìš”. ì •ë‹µì´ë©´ +10ì , ì˜¤ë‹µì´ë©´ -5ì .<br>
       ì •ë‹µ 2ì—°ì† ì„±ê³µ ì‹œ +5ì  ë³´ë„ˆìŠ¤!<br>
       ì •ë‹µ 3ì—°ì† ì„±ê³µ ì‹œ +10ì  ë³´ë„ˆìŠ¤!<br>
       ì´ 30ë²ˆ ë„ì „!</p>

    <div>
        <button onclick="checkAnswer(0)">ë²„íŠ¼ 1</button>
        <button onclick="checkAnswer(1)">ë²„íŠ¼ 2</button>
        <button onclick="checkAnswer(2)">ë²„íŠ¼ 3</button>
    </div>

    <div id="scoreDisplay">ì ìˆ˜: 0ì  | ì‹œë„: 0 / 30</div>
    <div id="answerLog">âœ… ì •ë‹µ ë²„íŠ¼ ë¡œê·¸:<br></div>

    <script>
        let score = 0;
        let attempts = 0;
        let correctButton = Math.floor(Math.random() * 3);
        let streak = 0;
        let perfect = true;

        function checkAnswer(clickedIndex) {
            if (attempts >= 30) return;

            const isCorrect = clickedIndex === correctButton;
            let gainedPoints = 0;

            if (isCorrect) {
                gainedPoints += 10;
                streak++;

                if (streak % 3 === 0) {
                    gainedPoints += 10; // 3ì—°ì† ë³´ë„ˆìŠ¤
                } else if (streak % 3 !== 0 && streak % 2 === 0) {
                    gainedPoints += 5; // 2ì—°ì† ë³´ë„ˆìŠ¤
                }
            } else {
                gainedPoints -= 5;
                streak = 0;
                perfect = false;
            }

            score += gainedPoints;
            attempts++;

            const answerLog = document.getElementById("answerLog");
            answerLog.innerHTML += `${attempts}íšŒì°¨ ì •ë‹µ: ë²„íŠ¼ ${correctButton + 1} ` +
                `(ì„ íƒ: ë²„íŠ¼ ${clickedIndex + 1} â†’ ${isCorrect ? 'âœ… ì •ë‹µ' : 'âŒ ì˜¤ë‹µ'})<br>` +
                `íšë“ ì ìˆ˜: ${gainedPoints > 0 ? '+' : ''}${gainedPoints}ì <br><br>`;

            const display = document.getElementById("scoreDisplay");
            if (attempts < 30) {
                display.textContent = `ì ìˆ˜: ${score}ì  | ì‹œë„: ${attempts} / 30`;
                correctButton = Math.floor(Math.random() * 3);
            } else {
                if (perfect) {
                    score += 30;
                    answerLog.innerHTML += `<br>ğŸ† í¼í™íŠ¸ ë³´ë„ˆìŠ¤ +30ì  íšë“!`;
                }
                display.textContent = `ğŸ‰ ê²Œì„ ì¢…ë£Œ! ìµœì¢… ì ìˆ˜: ${score}ì `;
            }
        }
    </script>

</body>
</html>
